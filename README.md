# çƒä½“æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunmasj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://kdocs.cn/l/cszuIiCKVNis)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€è®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„è¿…çŒ›å‘å±•ï¼Œç‰©ä½“æ£€æµ‹ä½œä¸ºå…¶æ ¸å¿ƒä»»åŠ¡ä¹‹ä¸€ï¼Œå·²ç»åœ¨å¤šä¸ªé¢†åŸŸå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œå¦‚è‡ªåŠ¨é©¾é©¶ã€å®‰é˜²ç›‘æ§ã€æ™ºèƒ½åˆ¶é€ ç­‰ã€‚YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹å› å…¶é«˜æ•ˆçš„å®æ—¶æ£€æµ‹èƒ½åŠ›å’Œè‰¯å¥½çš„å‡†ç¡®æ€§ï¼Œæˆä¸ºäº†ç‰©ä½“æ£€æµ‹é¢†åŸŸçš„çƒ­é—¨é€‰æ‹©ã€‚ç‰¹åˆ«æ˜¯YOLOv8çš„æ¨å‡ºï¼Œè¿›ä¸€æ­¥æå‡äº†æ£€æµ‹ç²¾åº¦å’Œé€Ÿåº¦ï¼Œä¸ºå¤æ‚åœºæ™¯ä¸‹çš„ç‰©ä½“è¯†åˆ«æä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œå°½ç®¡YOLOv8åœ¨å¤šç§åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯å’Œç›®æ ‡ç‰©ä½“çš„æ£€æµ‹ä¸Šä»å­˜åœ¨ä¸€å®šçš„å±€é™æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤šç±»åˆ«ç›®æ ‡çš„è¯†åˆ«å’Œå®šä½ç²¾åº¦æ–¹é¢ã€‚å› æ­¤ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„çƒä½“æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚

æœ¬ç ”ç©¶çš„ä¸»è¦ç›®æ ‡æ˜¯é€šè¿‡å¯¹YOLOv8æ¨¡å‹çš„æ”¹è¿›ï¼Œæå‡å…¶åœ¨çƒä½“æ£€æµ‹ä»»åŠ¡ä¸­çš„æ€§èƒ½ã€‚æˆ‘ä»¬é€‰å–äº†Robocon 2024æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«3939å¼ å›¾åƒï¼Œæ¶µç›–äº†å››ä¸ªç±»åˆ«ï¼šè“è‰²ã€ç´«è‰²ã€çº¢è‰²å’Œç­’ä»“ã€‚è¿™äº›ç±»åˆ«çš„é€‰æ‹©ä¸ä»…ä¸°å¯Œäº†æ£€æµ‹ä»»åŠ¡çš„å¤šæ ·æ€§ï¼Œä¹Ÿä¸ºæ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°æä¾›äº†è‰¯å¥½çš„åŸºç¡€ã€‚çƒä½“ä½œä¸ºä¸€ç§å¸¸è§çš„ç‰©ä½“ï¼Œå…¶åœ¨è¿åŠ¨ã€æ¸¸æˆã€å·¥ä¸šç­‰å¤šä¸ªé¢†åŸŸéƒ½æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå‡†ç¡®æ£€æµ‹å’Œè¯†åˆ«çƒä½“å¯¹äºå®ç°æ™ºèƒ½åŒ–ç®¡ç†å’Œæ§åˆ¶å…·æœ‰é‡è¦æ„ä¹‰ã€‚

é€šè¿‡å¯¹YOLOv8æ¨¡å‹çš„æ”¹è¿›ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šé¦–å…ˆï¼Œä¼˜åŒ–ç‰¹å¾æå–ç½‘ç»œï¼Œä»¥æé«˜å¯¹çƒä½“çš„ç»†èŠ‚æ•æ‰èƒ½åŠ›ï¼›å…¶æ¬¡ï¼Œè°ƒæ•´é”šæ¡†è®¾ç½®ï¼Œä»¥æ›´å¥½åœ°é€‚åº”ä¸åŒå°ºå¯¸å’Œå½¢çŠ¶çš„çƒä½“ï¼›æœ€åï¼Œç»“åˆæ•°æ®å¢å¼ºæŠ€æœ¯ï¼Œæå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œé²æ£’æ€§ã€‚è¿™äº›æ”¹è¿›æªæ–½æ—¨åœ¨æå‡æ¨¡å‹åœ¨å¤æ‚èƒŒæ™¯ä¸‹å¯¹çƒä½“çš„æ£€æµ‹ç²¾åº¦ï¼Œé™ä½è¯¯æ£€å’Œæ¼æ£€çš„æ¦‚ç‡ï¼Œä»è€Œå®ç°æ›´ä¸ºå¯é çš„æ£€æµ‹ç»“æœã€‚

æœ¬ç ”ç©¶çš„æ„ä¹‰ä¸ä»…åœ¨äºæå‡YOLOv8åœ¨çƒä½“æ£€æµ‹ä»»åŠ¡ä¸­çš„æ€§èƒ½ï¼Œæ›´åœ¨äºä¸ºåç»­çš„ç ”ç©¶æä¾›å€Ÿé‰´ã€‚é€šè¿‡å¯¹æ¨¡å‹çš„æ”¹è¿›å’Œä¼˜åŒ–ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿä¸ºå…¶ä»–ç‰©ä½“æ£€æµ‹ä»»åŠ¡æä¾›æ–°çš„æ€è·¯å’Œæ–¹æ³•ã€‚æ­¤å¤–ï¼Œéšç€æ•°æ®é›†çš„ä¸æ–­æ‰©å±•å’Œä¸°å¯Œï¼Œæœªæ¥çš„ç ”ç©¶è¿˜å¯ä»¥è¿›ä¸€æ­¥æ¢ç´¢å¤šç±»åˆ«ç‰©ä½“çš„è”åˆæ£€æµ‹ã€å®æ—¶æ£€æµ‹ç³»ç»Ÿçš„æ„å»ºç­‰æ–¹å‘ï¼Œæ¨åŠ¨è®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„çƒä½“æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œæ—¢æ˜¯å¯¹ç°æœ‰æŠ€æœ¯çš„æ·±åŒ–å’Œæ‹“å±•ï¼Œä¹Ÿæ˜¯å¯¹å®é™…åº”ç”¨éœ€æ±‚çš„ç§¯æå“åº”ã€‚é€šè¿‡æœ¬ç ”ç©¶ï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¤Ÿä¸ºç‰©ä½“æ£€æµ‹é¢†åŸŸçš„å‘å±•è´¡çŒ®ä¸€ä»½åŠ›é‡ï¼ŒåŒæ—¶ä¸ºç›¸å…³åº”ç”¨åœºæ™¯çš„æ™ºèƒ½åŒ–å‘å±•æä¾›æŠ€æœ¯æ”¯æŒã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1WXs8ejEhG/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 2
names: ['ball', 'silo']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åä¸ºâ€œRobocon 2024â€çš„æ•°æ®é›†ï¼Œä»¥æ”¯æŒå¯¹YOLOv8æ¨¡å‹çš„æ”¹è¿›ï¼Œä¸“æ³¨äºçƒä½“æ£€æµ‹ç³»ç»Ÿçš„è®­ç»ƒå’Œä¼˜åŒ–ã€‚è¯¥æ•°æ®é›†åŒ…å«äº†ä¸°å¯Œçš„å›¾åƒæ•°æ®ï¼Œæ—¨åœ¨æå‡æ¨¡å‹åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„æ£€æµ‹ç²¾åº¦å’Œæ•ˆç‡ã€‚æ•°æ®é›†çš„ç±»åˆ«æ•°é‡ä¸º2ï¼Œå…·ä½“ç±»åˆ«åŒ…æ‹¬â€œballâ€ï¼ˆçƒä½“ï¼‰å’Œâ€œsiloâ€ï¼ˆç­’ä»“ï¼‰ï¼Œè¿™ä¸¤ä¸ªç±»åˆ«çš„é€‰æ‹©ä¸ä»…åæ˜ äº†å®é™…åº”ç”¨ä¸­çš„é‡è¦æ€§ï¼Œä¹Ÿä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†å¤šæ ·åŒ–çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

â€œRobocon 2024â€æ•°æ®é›†çš„æ„å»ºè€ƒè™‘åˆ°äº†å¤šç§ç¯å¢ƒå’Œæ¡ä»¶ï¼Œä»¥ç¡®ä¿æ¨¡å‹åœ¨ä¸åŒåœºæ™¯ä¸‹çš„é²æ£’æ€§ã€‚æ•°æ®é›†ä¸­åŒ…å«çš„å›¾åƒæ¥æºäºå¤šä¸ªå®é™…åœºæ™¯ï¼Œæ¶µç›–äº†å®¤å†…å’Œå®¤å¤–çš„ä¸åŒå…‰ç…§æ¡ä»¶ã€èƒŒæ™¯å¤æ‚åº¦ä»¥åŠè§†è§’å˜åŒ–ã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿå­¦ä¹ åˆ°æ›´ä¸ºå…¨é¢çš„ç‰¹å¾ï¼Œä»è€Œæé«˜å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„é€‚åº”èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œçƒä½“åœ¨ä¸åŒèƒŒæ™¯ä¸‹çš„è¡¨ç°å¯èƒ½ä¼šå—åˆ°å…‰ç…§ã€é¢œè‰²å’Œå½¢çŠ¶çš„å½±å“ï¼Œè€Œç­’ä»“åˆ™å¯èƒ½å› ä¸ºå…¶ç»“æ„ç‰¹å¾è€Œåœ¨è§†è§‰ä¸Šä¸å…¶ä»–ç‰©ä½“äº§ç”Ÿæ··æ·†ã€‚å› æ­¤ï¼Œæ•°æ®é›†çš„è®¾è®¡æ—¨åœ¨æœ€å¤§é™åº¦åœ°å‡å°‘è¿™äº›æ½œåœ¨çš„å¹²æ‰°å› ç´ ï¼Œä»¥æå‡æ¨¡å‹çš„æ£€æµ‹å‡†ç¡®æ€§ã€‚

åœ¨æ•°æ®é›†çš„æ ‡æ³¨è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨äº†é«˜ç²¾åº¦çš„æ ‡æ³¨å·¥å…·ï¼Œç¡®ä¿æ¯ä¸ªå›¾åƒä¸­çš„ç›®æ ‡éƒ½å¾—åˆ°äº†å‡†ç¡®çš„æ¡†é€‰å’Œåˆ†ç±»ã€‚æ ‡æ³¨äººå‘˜ç»è¿‡ä¸¥æ ¼çš„åŸ¹è®­ï¼Œèƒ½å¤Ÿè¯†åˆ«å‡ºä¸åŒç±»åˆ«çš„ç‰¹å¾ï¼Œç¡®ä¿æ•°æ®é›†çš„è´¨é‡å’Œå¯é æ€§ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ•°æ®é›†ä¸ä»…ä¸ºæ¨¡å‹æä¾›äº†å¤§é‡çš„è®­ç»ƒæ ·æœ¬ï¼Œè¿˜ä¸ºåç»­çš„éªŒè¯å’Œæµ‹è¯•é˜¶æ®µå¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

æ­¤å¤–ï¼Œæ•°æ®é›†è¿˜åŒ…å«äº†ä¸°å¯Œçš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å›¾åƒçš„æ‹æ‘„æ—¶é—´ã€åœ°ç‚¹ã€ç¯å¢ƒæ¡ä»¶ç­‰ä¿¡æ¯ã€‚è¿™äº›å…ƒæ•°æ®ä¸ºåç»­çš„åˆ†æå’Œæ¨¡å‹è°ƒä¼˜æä¾›äº†é‡è¦çš„å‚è€ƒä¾æ®ï¼Œä½¿ç ”ç©¶äººå‘˜èƒ½å¤Ÿæ›´æ·±å…¥åœ°ç†è§£æ¨¡å‹åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„è¡¨ç°ã€‚é€šè¿‡å¯¹æ•°æ®é›†çš„å…¨é¢åˆ†æï¼Œç ”ç©¶äººå‘˜å¯ä»¥è¯†åˆ«å‡ºæ¨¡å‹åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„å¼±ç‚¹ï¼Œä»è€Œè¿›è¡Œé’ˆå¯¹æ€§çš„æ”¹è¿›ã€‚

åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨äº†æ•°æ®å¢å¼ºæŠ€æœ¯ï¼Œä»¥è¿›ä¸€æ­¥æå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚é€šè¿‡å¯¹â€œRobocon 2024â€æ•°æ®é›†ä¸­çš„å›¾åƒè¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€è£å‰ªç­‰æ“ä½œï¼Œç ”ç©¶äººå‘˜èƒ½å¤Ÿç”Ÿæˆæ›´å¤šçš„è®­ç»ƒæ ·æœ¬ï¼Œå¢å¼ºæ¨¡å‹å¯¹å„ç§å˜æ¢çš„é€‚åº”èƒ½åŠ›ã€‚è¿™ç§æ–¹æ³•ä¸ä»…æé«˜äº†æ¨¡å‹çš„è®­ç»ƒæ•ˆç‡ï¼Œè¿˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚

æ€»ä¹‹ï¼Œâ€œRobocon 2024â€æ•°æ®é›†ä¸ºæ”¹è¿›YOLOv8çš„çƒä½“æ£€æµ‹ç³»ç»Ÿæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å¤šæ ·åŒ–çš„å›¾åƒæ•°æ®ã€ç²¾å‡†çš„æ ‡æ³¨å’Œä¸°å¯Œçš„å…ƒæ•°æ®ï¼Œç ”ç©¶äººå‘˜èƒ½å¤Ÿæœ‰æ•ˆåœ°è®­ç»ƒå’Œä¼˜åŒ–æ¨¡å‹ï¼Œä»¥å®ç°æ›´é«˜çš„æ£€æµ‹ç²¾åº¦å’Œæ›´å¼ºçš„é€‚åº”èƒ½åŠ›ã€‚è¿™ä¸€æ•°æ®é›†çš„æˆåŠŸåº”ç”¨ï¼Œå°†ä¸ºæœªæ¥çš„ç ”ç©¶å’Œå®é™…åº”ç”¨æä¾›å®è´µçš„ç»éªŒå’Œæ•°æ®æ”¯æŒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°æ¨¡å‹ï¼Œç»§æ‰¿å¹¶å‘å±•äº†å‰å‡ ä»£YOLOç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼Œå°†ç›®æ ‡æ£€æµ‹ä»»åŠ¡è½¬åŒ–ä¸ºä¸€ä¸ªå›å½’é—®é¢˜ï¼Œåˆ©ç”¨æ·±åº¦å­¦ä¹ çš„å¼ºå¤§èƒ½åŠ›å®ç°é«˜æ•ˆçš„ç›®æ ‡å®šä½ä¸åˆ†ç±»ã€‚ä¸ä¹‹å‰çš„YOLOç‰ˆæœ¬ç›¸æ¯”ï¼ŒYOLOv8åœ¨ç®—æ³•æ¶æ„å’Œæ£€æµ‹ç­–ç•¥ä¸Šè¿›è¡Œäº†æ˜¾è‘—çš„æ”¹è¿›ï¼Œå°¤å…¶æ˜¯åœ¨æ£€æµ‹ç²¾åº¦å’Œé€Ÿåº¦æ–¹é¢çš„æå‡ï¼Œä½¿å…¶åœ¨å®é™…åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ã€‚

YOLOv8çš„ç½‘ç»œç»“æ„ä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šä¸»å¹²ç½‘ç»œï¼ˆBackboneï¼‰ã€ç‰¹å¾å¢å¼ºç½‘ç»œï¼ˆNeckï¼‰å’Œæ£€æµ‹å¤´ï¼ˆHeadï¼‰ã€‚ä¸»å¹²ç½‘ç»œè´Ÿè´£ä»è¾“å…¥å›¾åƒä¸­æå–ç‰¹å¾ï¼Œé‡‡ç”¨äº†ä¸€ç³»åˆ—å·ç§¯å±‚å’Œåå·ç§¯å±‚ï¼Œé€šè¿‡æ®‹å·®è¿æ¥å’Œç“¶é¢ˆç»“æ„æ¥å‡å°ç½‘ç»œçš„å¤æ‚åº¦ï¼ŒåŒæ—¶æé«˜ç‰¹å¾æå–çš„æ€§èƒ½ã€‚YOLOv8çš„ä¸»å¹²ç½‘ç»œä¸­ï¼ŒC2æ¨¡å—ä½œä¸ºåŸºæœ¬æ„æˆå•å…ƒï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ•æ‰å›¾åƒä¸­çš„é‡è¦ç‰¹å¾ä¿¡æ¯ã€‚

ç‰¹å¾å¢å¼ºç½‘ç»œåˆ™æ˜¯YOLOv8çš„ä¸€å¤§äº®ç‚¹ï¼Œé‡‡ç”¨äº†PANï¼ˆPath Aggregation Networkï¼‰ç»“æ„ï¼Œæ—¨åœ¨é€šè¿‡å¤šå°ºåº¦ç‰¹å¾èåˆæŠ€æœ¯ï¼Œå°†æ¥è‡ªä¸»å¹²ç½‘ç»œä¸åŒé˜¶æ®µçš„ç‰¹å¾å›¾è¿›è¡Œæ•´åˆã€‚è¿™ç§æ•´åˆæ–¹å¼ä½¿å¾—YOLOv8èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰ä¸åŒå°ºåº¦ç›®æ ‡çš„ä¿¡æ¯ï¼Œä»è€Œæå‡äº†ç›®æ ‡æ£€æµ‹çš„æ€§èƒ½å’Œé²æ£’æ€§ã€‚é€šè¿‡å¯¹ç‰¹å¾å›¾çš„ä¸Šé‡‡æ ·å’Œä¸‹é‡‡æ ·ï¼ŒYOLOv8èƒ½å¤Ÿåœ¨ä¸åŒçš„ç©ºé—´å°ºåº¦ä¸Šè¿›è¡Œä¿¡æ¯èåˆï¼Œç¡®ä¿å°ç›®æ ‡å’Œå¤§ç›®æ ‡éƒ½èƒ½è¢«æœ‰æ•ˆæ£€æµ‹ã€‚

åœ¨æ£€æµ‹å¤´éƒ¨åˆ†ï¼ŒYOLOv8é‡‡ç”¨äº†è§£è€¦å¤´çš„è®¾è®¡ï¼Œå°†åˆ†ç±»å’Œå›å½’ä»»åŠ¡åˆ†å¼€å¤„ç†ã€‚ä¼ ç»Ÿçš„ç›®æ ‡æ£€æµ‹æ–¹æ³•é€šå¸¸å°†è¿™ä¸¤ä¸ªä»»åŠ¡è€¦åˆåœ¨ä¸€èµ·ï¼Œå¯¼è‡´åœ¨å¤æ‚åœºæ™¯ä¸‹å®šä½ä¸å‡†ç¡®æˆ–åˆ†ç±»é”™è¯¯ã€‚è€ŒYOLOv8é€šè¿‡è§£è€¦è®¾è®¡ï¼Œä½¿å¾—æ¯ä¸ªä»»åŠ¡å¯ä»¥æ›´åŠ ä¸“æ³¨äºè‡ªèº«çš„ç›®æ ‡ï¼Œä»è€Œæé«˜äº†æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚æ£€æµ‹å¤´åŒ…å«å¤šä¸ªæ£€æµ‹å±‚ï¼Œåˆ†åˆ«è´Ÿè´£ä¸åŒå°ºå¯¸ç›®æ ‡çš„æ£€æµ‹ï¼Œè¿™ç§å¤šå¤´ç»“æ„èƒ½å¤Ÿæœ‰æ•ˆåº”å¯¹å¤šæ ·åŒ–çš„ç›®æ ‡å°ºå¯¸ã€‚

YOLOv8çš„å¦ä¸€ä¸ªé‡è¦åˆ›æ–°æ˜¯é‡‡ç”¨äº†Anchor-freeç›®æ ‡æ£€æµ‹æ–¹æ³•ã€‚è¿™ä¸€æ–¹æ³•çš„æ ¸å¿ƒåœ¨äºä¸å†ä¾èµ–äºé¢„å…ˆå®šä¹‰çš„é”šç‚¹æ¡†ï¼Œè€Œæ˜¯é€šè¿‡å›å½’çš„æ–¹å¼ç›´æ¥é¢„æµ‹ç›®æ ‡çš„ä½ç½®å’Œå¤§å°ã€‚è¿™ç§æ–¹å¼ä¸ä»…ç®€åŒ–äº†æ¨¡å‹çš„è®¾è®¡ï¼Œä¹Ÿæé«˜äº†æ£€æµ‹çš„çµæ´»æ€§ã€‚ä¼ ç»Ÿçš„é”šç‚¹æ¡†é€‰æ‹©å’Œè°ƒæ•´è¿‡ç¨‹ç¹çä¸”æ˜“å‡ºé”™ï¼Œè€ŒYOLOv8çš„Anchor-freeæ–¹æ³•ä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ›´å¿«åœ°èšç„¦äºç›®æ ‡ä½ç½®çš„é‚»è¿‘ç‚¹ï¼Œä»è€Œä½¿å¾—é¢„æµ‹æ¡†æ›´æ¥è¿‘äºå®é™…çš„è¾¹ç•Œæ¡†åŒºåŸŸã€‚

å°½ç®¡YOLOv8åœ¨å¤šä¸ªæ–¹é¢éƒ½å–å¾—äº†æ˜¾è‘—çš„è¿›æ­¥ï¼Œä½†åœ¨æŸäº›å¤æ‚ç¯å¢ƒä¸‹ä»ç„¶å­˜åœ¨ä¸€å®šçš„å±€é™æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤æ‚çš„æ°´é¢ç¯å¢ƒä¸­ï¼Œå°ç›®æ ‡æ¼‚æµ®ç‰©çš„ç‰¹å¾å¾€å¾€å¤æ‚å¤šå˜ï¼ŒèƒŒæ™¯ä¹Ÿå¯èƒ½æä¸ºå¤šæ ·åŒ–ï¼Œè¿™ä½¿å¾—YOLOv8åœ¨å®šä½ç²¾åº¦å’Œç›®æ ‡æ„ŸçŸ¥èƒ½åŠ›ä¸Šé¢ä¸´æŒ‘æˆ˜ã€‚ä¸ºäº†åº”å¯¹è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†YOLOv8-WSSODç®—æ³•ï¼Œæ—¨åœ¨å¯¹YOLOv8è¿›è¡Œè¿›ä¸€æ­¥çš„æ”¹è¿›ã€‚

YOLOv8-WSSODç®—æ³•çš„æ”¹è¿›ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ã€‚é¦–å…ˆï¼Œä¸ºäº†å‡è½»ä¸»å¹²ç½‘ç»œåœ¨ä¸‹é‡‡æ ·è¿‡ç¨‹ä¸­çš„å™ªå£°å½±å“ï¼Œç ”ç©¶è€…å¼•å…¥äº†æ•è·è¿œç¨‹ä¾èµ–çš„æ€æƒ³ï¼Œé‡‡ç”¨äº†BiFormeråŒå±‚è·¯ç”±æ³¨æ„åŠ›æœºåˆ¶æ„å»ºC2fBFæ¨¡å—ã€‚è¿™ä¸€æ¨¡å—èƒ½å¤Ÿä¿ç•™ç‰¹å¾æå–è¿‡ç¨‹ä¸­æ›´ç»†ç²’åº¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»è€Œæå‡æ¨¡å‹å¯¹å¤æ‚èƒŒæ™¯çš„é€‚åº”èƒ½åŠ›ã€‚å…¶æ¬¡ï¼Œé’ˆå¯¹å°ç›®æ ‡æ¼æ£€çš„é—®é¢˜ï¼ŒYOLOv8-WSSODåœ¨ç½‘ç»œä¸­æ·»åŠ äº†ä¸€ä¸ªæ›´å°çš„æ£€æµ‹å¤´ï¼Œä»¥å¢å¼ºç½‘ç»œå¯¹å°ç›®æ ‡çš„æ„ŸçŸ¥åŠ›ã€‚æ­¤å¤–ï¼Œåœ¨Neckç«¯å¼•å…¥äº†GSConvå’ŒSlim-neckæŠ€æœ¯ï¼Œè¿™ä¸ä»…ä¿æŒäº†æ£€æµ‹ç²¾åº¦ï¼Œè¿˜æœ‰æ•ˆé™ä½äº†è®¡ç®—é‡ï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„å®ç”¨æ€§ã€‚

æœ€åï¼ŒYOLOv8-WSSODè¿˜ä½¿ç”¨äº†MPDIoUæŸå¤±å‡½æ•°æ›¿æ¢äº†ä¼ ç»Ÿçš„CIoUæŸå¤±å‡½æ•°ï¼Œä»¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œç²¾å‡†åº¦ã€‚MPDIoUæŸå¤±å‡½æ•°åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­è¡¨ç°å‡ºè‰²ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†ç›®æ ‡ä¹‹é—´çš„é‡å å…³ç³»ï¼Œä»è€Œæå‡æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8é€šè¿‡å…¶åˆ›æ–°çš„ç½‘ç»œç»“æ„å’ŒAnchor-freeæ£€æµ‹æ–¹æ³•ï¼Œåœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸå–å¾—äº†æ˜¾è‘—çš„è¿›å±•ã€‚å°½ç®¡åœ¨æŸäº›å¤æ‚ç¯å¢ƒä¸‹ä»å­˜åœ¨æŒ‘æˆ˜ï¼Œä½†é€šè¿‡åç»­çš„æ”¹è¿›å’Œä¼˜åŒ–ï¼ŒYOLOv8åŠå…¶è¡ç”Ÿç®—æ³•æœ‰æœ›åœ¨æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ä¸­å±•ç°å‡ºæ›´å¼ºçš„æ€§èƒ½ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒYOLOç³»åˆ—ç®—æ³•å°†ç»§ç»­æ¨åŠ¨ç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„è¿›æ­¥ï¼Œä¸ºå„ç±»æ™ºèƒ½åº”ç”¨æä¾›æ›´ä¸ºå¼ºå¤§çš„æ”¯æŒã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 ui.py

ä»¥ä¸‹æ˜¯ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œçš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º0åˆ™è¡¨ç¤ºå‡ºé”™
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")

# ä¸»ç¨‹åºå…¥å£
if __name__ == "__main__":
    # æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬è·¯å¾„

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç åˆ†æä¸æ³¨é‡Šï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `import sys`: å¯¼å…¥ `sys` æ¨¡å—ä»¥è·å– Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `import subprocess`: å¯¼å…¥ `subprocess` æ¨¡å—ä»¥ä¾¿åœ¨ Python ä¸­æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **å®šä¹‰ `run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - ä½¿ç”¨ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - æ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶å°† `shell` å‚æ•°è®¾ç½®ä¸º `True`ï¼Œä»¥ä¾¿åœ¨ shell ä¸­è¿è¡Œå‘½ä»¤ã€‚
   - æ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœè¿”å›ç ä¸ä¸º0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - ä½¿ç”¨ `if __name__ == "__main__":` ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥è„šæœ¬æ—¶æ‰ä¼šæ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py`ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥è„šæœ¬è·¯å¾„ä»¥è¿è¡Œè¯¥è„šæœ¬ã€‚

### æ€»ç»“ï¼š
è¯¥ä»£ç çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„ Streamlit è„šæœ¬ï¼Œå¹¶å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `ui.py` çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ¥è¯´æ˜¯ä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œè¿™äº›æ¨¡å—åˆ†åˆ«ç”¨äºè®¿é—®ç³»ç»Ÿå‚æ•°ã€å¤„ç†æ–‡ä»¶è·¯å¾„å’Œæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™é€šè¿‡ `sys.executable` å®ç°ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¯¥å‘½ä»¤ç”¨äºè°ƒç”¨ `streamlit` æ¨¡å—å¹¶è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™é‡Œä½¿ç”¨äº† `-m` å‚æ•°æ¥ç¡®ä¿ä»¥æ¨¡å—çš„æ–¹å¼è¿è¡Œ `streamlit`ï¼Œåé¢è·Ÿç€è„šæœ¬çš„è·¯å¾„ã€‚

ä½¿ç”¨ `subprocess.run` æ–¹æ³•æ¥æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ï¼Œå¹¶é€šè¿‡ `shell=True` å‚æ•°å…è®¸åœ¨ shell ä¸­æ‰§è¡Œè¯¥å‘½ä»¤ã€‚æ‰§è¡Œå®Œåï¼Œç¨‹åºä¼šæ£€æŸ¥è¿”å›çš„çŠ¶æ€ç ï¼Œå¦‚æœçŠ¶æ€ç ä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šè¾“å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` è¯­å¥æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥æ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚è¿™éƒ¨åˆ†ä»£ç æŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œè¿™é‡Œä½¿ç”¨äº† `abs_path` å‡½æ•°æ¥è·å– `web.py` çš„ç»å¯¹è·¯å¾„ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ª Streamlit åº”ç”¨ï¼Œç¡®ä¿ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°å¯åŠ¨å’Œæµ‹è¯• `web.py` è„šæœ¬ã€‚

#### 11.2 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\pose\train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“å’Œæ¨¡å—
from copy import copy
from ultralytics.models import yolo
from ultralytics.nn.tasks import PoseModel
from ultralytics.utils import DEFAULT_CFG, LOGGER
from ultralytics.utils.plotting import plot_images, plot_results

class PoseTrainer(yolo.detect.DetectionTrainer):
    """
    PoseTrainerç±»ï¼Œæ‰©å±•äº†DetectionTrainerç±»ï¼Œç”¨äºåŸºäºå§¿æ€æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def __init__(self, cfg=DEFAULT_CFG, overrides=None, _callbacks=None):
        """åˆå§‹åŒ–PoseTrainerå¯¹è±¡ï¼Œä½¿ç”¨æŒ‡å®šçš„é…ç½®å’Œè¦†ç›–å‚æ•°ã€‚"""
        if overrides is None:
            overrides = {}
        overrides['task'] = 'pose'  # è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºå§¿æ€ä¼°è®¡
        super().__init__(cfg, overrides, _callbacks)  # è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•

        # é’ˆå¯¹Apple MPSè®¾å¤‡çš„å·²çŸ¥é—®é¢˜å‘å‡ºè­¦å‘Š
        if isinstance(self.args.device, str) and self.args.device.lower() == 'mps':
            LOGGER.warning("WARNING âš ï¸ Apple MPS known Pose bug. Recommend 'device=cpu' for Pose models. "
                           'See https://github.com/ultralytics/ultralytics/issues/4031.')

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è·å–æŒ‡å®šé…ç½®å’Œæƒé‡çš„å§¿æ€ä¼°è®¡æ¨¡å‹ã€‚"""
        # åˆ›å»ºPoseModelå®ä¾‹
        model = PoseModel(cfg, ch=3, nc=self.data['nc'], data_kpt_shape=self.data['kpt_shape'], verbose=verbose)
        if weights:
            model.load(weights)  # å¦‚æœæä¾›äº†æƒé‡ï¼Œåˆ™åŠ è½½æƒé‡

        return model  # è¿”å›æ¨¡å‹

    def set_model_attributes(self):
        """è®¾ç½®PoseModelçš„å…³é”®ç‚¹å½¢çŠ¶å±æ€§ã€‚"""
        super().set_model_attributes()  # è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
        self.model.kpt_shape = self.data['kpt_shape']  # è®¾ç½®å…³é”®ç‚¹å½¢çŠ¶

    def get_validator(self):
        """è¿”å›PoseValidatorç±»çš„å®ä¾‹ï¼Œç”¨äºéªŒè¯ã€‚"""
        self.loss_names = 'box_loss', 'pose_loss', 'kobj_loss', 'cls_loss', 'dfl_loss'  # å®šä¹‰æŸå¤±åç§°
        return yolo.pose.PoseValidator(self.test_loader, save_dir=self.save_dir, args=copy(self.args))  # è¿”å›éªŒè¯å™¨å®ä¾‹

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶ä¸€æ‰¹è®­ç»ƒæ ·æœ¬ï¼ŒåŒ…æ‹¬æ³¨é‡Šçš„ç±»åˆ«æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œå…³é”®ç‚¹ã€‚"""
        images = batch['img']  # è·å–å›¾åƒ
        kpts = batch['keypoints']  # è·å–å…³é”®ç‚¹
        cls = batch['cls'].squeeze(-1)  # è·å–ç±»åˆ«
        bboxes = batch['bboxes']  # è·å–è¾¹ç•Œæ¡†
        paths = batch['im_file']  # è·å–å›¾åƒæ–‡ä»¶è·¯å¾„
        batch_idx = batch['batch_idx']  # è·å–æ‰¹æ¬¡ç´¢å¼•
        
        # ç»˜åˆ¶å›¾åƒå¹¶ä¿å­˜
        plot_images(images,
                    batch_idx,
                    cls,
                    bboxes,
                    kpts=kpts,
                    paths=paths,
                    fname=self.save_dir / f'train_batch{ni}.jpg',
                    on_plot=self.on_plot)

    def plot_metrics(self):
        """ç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯çš„æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, pose=True, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **PoseTrainerç±»**ï¼šç»§æ‰¿è‡ª`DetectionTrainer`ï¼Œç”¨äºå§¿æ€ä¼°è®¡çš„è®­ç»ƒã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šè®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºå§¿æ€ä¼°è®¡ï¼Œå¹¶å¤„ç†ç‰¹å®šè®¾å¤‡çš„è­¦å‘Šã€‚
3. **è·å–æ¨¡å‹**ï¼šåˆ›å»ºå’ŒåŠ è½½å§¿æ€ä¼°è®¡æ¨¡å‹ã€‚
4. **è®¾ç½®æ¨¡å‹å±æ€§**ï¼šè®¾ç½®æ¨¡å‹çš„å…³é”®ç‚¹å½¢çŠ¶ã€‚
5. **è·å–éªŒè¯å™¨**ï¼šè¿”å›ç”¨äºéªŒè¯çš„PoseValidatorå®ä¾‹ã€‚
6. **ç»˜åˆ¶è®­ç»ƒæ ·æœ¬**ï¼šå¯è§†åŒ–è®­ç»ƒæ•°æ®ï¼ŒåŒ…æ‹¬å›¾åƒã€å…³é”®ç‚¹å’Œè¾¹ç•Œæ¡†ã€‚
7. **ç»˜åˆ¶æŒ‡æ ‡**ï¼šå¯è§†åŒ–è®­ç»ƒå’ŒéªŒè¯è¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒåŸºäºå§¿æ€ä¼°è®¡æ¨¡å‹çš„YOLOv8ç®—æ³•çš„å®ç°ï¼Œæ–‡ä»¶åä¸º`train.py`ï¼Œå±äºUltralytics YOLOé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚è¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º`PoseTrainer`çš„ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª`DetectionTrainer`ï¼Œå¹¶ä¸“é—¨ç”¨äºå¤„ç†å§¿æ€ä¼°è®¡ä»»åŠ¡ã€‚

åœ¨æ–‡ä»¶çš„å¼€å¤´ï¼Œå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œç±»ï¼ŒåŒ…æ‹¬YOLOæ¨¡å‹ã€PoseModelã€é»˜è®¤é…ç½®ã€æ—¥å¿—è®°å½•å™¨ä»¥åŠç”¨äºç»˜å›¾çš„å·¥å…·ã€‚è¿™äº›å¯¼å…¥ä¸ºåç»­çš„æ¨¡å‹è®­ç»ƒå’Œç»“æœå¯è§†åŒ–æä¾›äº†æ”¯æŒã€‚

`PoseTrainer`ç±»çš„æ„é€ å‡½æ•°`__init__`æ¥å—é…ç½®å‚æ•°å’Œè¦†ç›–å‚æ•°ï¼Œå¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºâ€œposeâ€ã€‚å¦‚æœè®¾å¤‡ç±»å‹ä¸ºâ€œmpsâ€ï¼ˆå³Appleçš„Metal Performance Shadersï¼‰ï¼Œåˆ™ä¼šå‘å‡ºè­¦å‘Šï¼Œå»ºè®®ä½¿ç”¨CPUè¿›è¡Œå§¿æ€æ¨¡å‹çš„è®­ç»ƒï¼Œä»¥é¿å…å·²çŸ¥çš„bugã€‚

`get_model`æ–¹æ³•ç”¨äºè·å–å§¿æ€ä¼°è®¡æ¨¡å‹ï¼Œæ¥å—é…ç½®å’Œæƒé‡å‚æ•°ã€‚å¦‚æœæä¾›äº†æƒé‡ï¼Œåˆ™ä¼šåŠ è½½ç›¸åº”çš„æ¨¡å‹æƒé‡ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª`PoseModel`å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„é€šé“æ•°å’Œç±»åˆ«æ•°æ ¹æ®æ•°æ®é›†çš„é…ç½®è¿›è¡Œè®¾ç½®ã€‚

`set_model_attributes`æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å…³é”®ç‚¹å½¢çŠ¶å±æ€§ã€‚å®ƒé¦–å…ˆè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œç„¶åå°†å…³é”®ç‚¹å½¢çŠ¶ä»æ•°æ®é›†ä¸­æå–å¹¶èµ‹å€¼ç»™æ¨¡å‹ã€‚

`get_validator`æ–¹æ³•è¿”å›ä¸€ä¸ª`PoseValidator`å®ä¾‹ï¼Œç”¨äºæ¨¡å‹éªŒè¯ã€‚è¯¥æ–¹æ³•å®šä¹‰äº†æŸå¤±åç§°ï¼ŒåŒ…æ‹¬è¾¹ç•Œæ¡†æŸå¤±ã€å§¿æ€æŸå¤±ã€å…³é”®å¯¹è±¡æŸå¤±ã€ç±»åˆ«æŸå¤±å’Œåˆ†å¸ƒæŸå¤±ã€‚

`plot_training_samples`æ–¹æ³•ç”¨äºç»˜åˆ¶ä¸€æ‰¹è®­ç»ƒæ ·æœ¬ï¼Œæ˜¾ç¤ºå¸¦æœ‰æ³¨é‡Šçš„ç±»åˆ«æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œå…³é”®ç‚¹ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªæ‰¹æ¬¡çš„æ•°æ®ï¼Œæå–å›¾åƒã€å…³é”®ç‚¹ã€ç±»åˆ«å’Œè¾¹ç•Œæ¡†ä¿¡æ¯ï¼Œå¹¶è°ƒç”¨`plot_images`å‡½æ•°ç”Ÿæˆå¯è§†åŒ–å›¾åƒï¼Œä¿å­˜åˆ°æŒ‡å®šçš„ç›®å½•ä¸­ã€‚

æœ€åï¼Œ`plot_metrics`æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯çš„æŒ‡æ ‡ï¼Œè°ƒç”¨`plot_results`å‡½æ•°ç”Ÿæˆç»“æœå›¾ï¼Œä¾¿äºè§‚å¯Ÿæ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªç»“æ„åŒ–çš„æ–¹å¼æ¥è®­ç»ƒå’ŒéªŒè¯å§¿æ€ä¼°è®¡æ¨¡å‹ï¼Œç»“åˆäº†YOLOv8çš„å¼ºå¤§åŠŸèƒ½å’ŒUltralyticsçš„é«˜æ•ˆå®ç°ã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\atss.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import torch
import torch.nn as nn
import torch.nn.functional as F

def generate_anchors(feats, fpn_strides, grid_cell_size=5.0, grid_cell_offset=0.5, device='cpu', is_eval=False, mode='af'):
    '''æ ¹æ®ç‰¹å¾ç”Ÿæˆé”šæ¡†ï¼ˆanchorsï¼‰ã€‚'''
    anchors = []  # å­˜å‚¨é”šæ¡†
    anchor_points = []  # å­˜å‚¨é”šç‚¹
    stride_tensor = []  # å­˜å‚¨æ­¥å¹…
    num_anchors_list = []  # å­˜å‚¨æ¯å±‚çš„é”šæ¡†æ•°é‡

    assert feats is not None  # ç¡®ä¿ç‰¹å¾ä¸ä¸ºç©º

    if is_eval:  # å¦‚æœæ˜¯è¯„ä¼°æ¨¡å¼
        for i, stride in enumerate(fpn_strides):
            _, _, h, w = feats[i].shape  # è·å–ç‰¹å¾å›¾çš„é«˜åº¦å’Œå®½åº¦
            shift_x = torch.arange(end=w, device=device) + grid_cell_offset  # xæ–¹å‘çš„åç§»
            shift_y = torch.arange(end=h, device=device) + grid_cell_offset  # yæ–¹å‘çš„åç§»
            shift_y, shift_x = torch.meshgrid(shift_y, shift_x, indexing='ij')  # åˆ›å»ºç½‘æ ¼
            anchor_point = torch.stack([shift_x, shift_y], axis=-1).to(torch.float)  # ç”Ÿæˆé”šç‚¹

            if mode == 'af':  # anchor-freeæ¨¡å¼
                anchor_points.append(anchor_point.reshape([-1, 2]))  # å°†é”šç‚¹å±•å¹³
                stride_tensor.append(torch.full((h * w, 1), stride, dtype=torch.float, device=device))  # ç”Ÿæˆæ­¥å¹…å¼ é‡
            elif mode == 'ab':  # anchor-basedæ¨¡å¼
                anchor_points.append(anchor_point.reshape([-1, 2]).repeat(3, 1))  # é‡å¤é”šç‚¹
                stride_tensor.append(torch.full((h * w, 1), stride, dtype=torch.float, device=device).repeat(3, 1))  # é‡å¤æ­¥å¹…

        anchor_points = torch.cat(anchor_points)  # åˆå¹¶é”šç‚¹
        stride_tensor = torch.cat(stride_tensor)  # åˆå¹¶æ­¥å¹…
        return anchor_points, stride_tensor  # è¿”å›é”šç‚¹å’Œæ­¥å¹…

    else:  # å¦‚æœä¸æ˜¯è¯„ä¼°æ¨¡å¼
        for i, stride in enumerate(fpn_strides):
            _, _, h, w = feats[i].shape  # è·å–ç‰¹å¾å›¾çš„é«˜åº¦å’Œå®½åº¦
            cell_half_size = grid_cell_size * stride * 0.5  # è®¡ç®—å•å…ƒæ ¼çš„ä¸€åŠå¤§å°
            shift_x = (torch.arange(end=w, device=device) + grid_cell_offset) * stride  # xæ–¹å‘çš„åç§»
            shift_y = (torch.arange(end=h, device=device) + grid_cell_offset) * stride  # yæ–¹å‘çš„åç§»
            shift_y, shift_x = torch.meshgrid(shift_y, shift_x, indexing='ij')  # åˆ›å»ºç½‘æ ¼
            anchor = torch.stack(
                [
                    shift_x - cell_half_size, shift_y - cell_half_size,
                    shift_x + cell_half_size, shift_y + cell_half_size
                ],
                axis=-1).clone().to(feats[0].dtype)  # ç”Ÿæˆé”šæ¡†
            anchor_point = torch.stack([shift_x, shift_y], axis=-1).clone().to(feats[0].dtype)  # ç”Ÿæˆé”šç‚¹

            if mode == 'af':  # anchor-freeæ¨¡å¼
                anchors.append(anchor.reshape([-1, 4]))  # å°†é”šæ¡†å±•å¹³
                anchor_points.append(anchor_point.reshape([-1, 2]))  # å°†é”šç‚¹å±•å¹³
            elif mode == 'ab':  # anchor-basedæ¨¡å¼
                anchors.append(anchor.reshape([-1, 4]).repeat(3, 1))  # é‡å¤é”šæ¡†
                anchor_points.append(anchor_point.reshape([-1, 2]).repeat(3, 1))  # é‡å¤é”šç‚¹

            num_anchors_list.append(len(anchors[-1]))  # è®°å½•æ¯å±‚çš„é”šæ¡†æ•°é‡
            stride_tensor.append(torch.full([num_anchors_list[-1], 1], stride, dtype=feats[0].dtype))  # ç”Ÿæˆæ­¥å¹…å¼ é‡

        anchors = torch.cat(anchors)  # åˆå¹¶é”šæ¡†
        anchor_points = torch.cat(anchor_points).to(device)  # åˆå¹¶é”šç‚¹å¹¶ç§»åŠ¨åˆ°æŒ‡å®šè®¾å¤‡
        stride_tensor = torch.cat(stride_tensor).to(device)  # åˆå¹¶æ­¥å¹…å¹¶ç§»åŠ¨åˆ°æŒ‡å®šè®¾å¤‡
        return anchors, anchor_points, num_anchors_list, stride_tensor  # è¿”å›é”šæ¡†ã€é”šç‚¹ã€é”šæ¡†æ•°é‡å’Œæ­¥å¹…

class ATSSAssigner(nn.Module):
    '''è‡ªé€‚åº”è®­ç»ƒæ ·æœ¬é€‰æ‹©åˆ†é…å™¨'''
    def __init__(self, topk=9, num_classes=80):
        super(ATSSAssigner, self).__init__()
        self.topk = topk  # æ¯å±‚é€‰æ‹©çš„å‰kä¸ªå€™é€‰æ¡†
        self.num_classes = num_classes  # ç±»åˆ«æ•°é‡
        self.bg_idx = num_classes  # èƒŒæ™¯ç±»åˆ«ç´¢å¼•

    @torch.no_grad()
    def forward(self, anc_bboxes, n_level_bboxes, gt_labels, gt_bboxes, mask_gt, pd_bboxes):
        '''å‰å‘ä¼ æ’­å‡½æ•°ï¼Œç”¨äºåˆ†é…é”šæ¡†å’Œè®¡ç®—ç›®æ ‡æ ‡ç­¾ã€æ¡†å’Œåˆ†æ•°'''
        self.n_anchors = anc_bboxes.size(0)  # æ€»é”šæ¡†æ•°é‡
        self.bs = gt_bboxes.size(0)  # æ‰¹æ¬¡å¤§å°
        self.n_max_boxes = gt_bboxes.size(1)  # æ¯ä¸ªæ‰¹æ¬¡æœ€å¤§æ¡†æ•°é‡

        if self.n_max_boxes == 0:  # å¦‚æœæ²¡æœ‰çœŸå®æ¡†
            device = gt_bboxes.device  # è·å–è®¾å¤‡
            return torch.full([self.bs, self.n_anchors], self.bg_idx).to(device), \
                   torch.zeros([self.bs, self.n_anchors, 4]).to(device), \
                   torch.zeros([self.bs, self.n_anchors, self.num_classes]).to(device), \
                   torch.zeros([self.bs, self.n_anchors]).to(device)  # è¿”å›èƒŒæ™¯æ ‡ç­¾å’Œé›¶æ¡†

        overlaps = iou2d_calculator(gt_bboxes.reshape([-1, 4]), anc_bboxes)  # è®¡ç®—çœŸå®æ¡†ä¸é”šæ¡†çš„IoU
        overlaps = overlaps.reshape([self.bs, -1, self.n_anchors])  # é‡æ–°è°ƒæ•´å½¢çŠ¶

        distances, ac_points = dist_calculator(gt_bboxes.reshape([-1, 4]), anc_bboxes)  # è®¡ç®—è·ç¦»
        distances = distances.reshape([self.bs, -1, self.n_anchors])  # é‡æ–°è°ƒæ•´å½¢çŠ¶

        is_in_candidate, candidate_idxs = self.select_topk_candidates(distances, n_level_bboxes, mask_gt)  # é€‰æ‹©top-kå€™é€‰æ¡†

        overlaps_thr_per_gt, iou_candidates = self.thres_calculator(is_in_candidate, candidate_idxs, overlaps)  # è®¡ç®—é˜ˆå€¼

        # é€‰æ‹©IoUå¤§äºé˜ˆå€¼çš„å€™é€‰æ¡†ä½œä¸ºæ­£æ ·æœ¬
        is_pos = torch.where(iou_candidates > overlaps_thr_per_gt.repeat([1, 1, self.n_anchors]),
                             is_in_candidate, torch.zeros_like(is_in_candidate))

        is_in_gts = select_candidates_in_gts(ac_points, gt_bboxes)  # æ£€æŸ¥å€™é€‰æ¡†æ˜¯å¦åœ¨çœŸå®æ¡†å†…
        mask_pos = is_pos * is_in_gts * mask_gt  # è®¡ç®—æ­£æ ·æœ¬æ©ç 

        target_gt_idx, fg_mask, mask_pos = select_highest_overlaps(mask_pos, overlaps, self.n_max_boxes)  # é€‰æ‹©é‡å åº¦æœ€é«˜çš„çœŸå®æ¡†

        # ç”Ÿæˆç›®æ ‡
        target_labels, target_bboxes, target_scores = self.get_targets(gt_labels, gt_bboxes, target_gt_idx, fg_mask)

        # é€šè¿‡IoUè¿›è¡Œè½¯æ ‡ç­¾å¤„ç†
        if pd_bboxes is not None:
            ious = iou_calculator(gt_bboxes, pd_bboxes) * mask_pos  # è®¡ç®—IoU
            ious = ious.max(axis=-2)[0].unsqueeze(-1)  # è·å–æœ€å¤§IoU
            target_scores *= ious  # æ›´æ–°ç›®æ ‡åˆ†æ•°

        return target_labels, target_bboxes, target_scores, fg_mask.bool(), target_gt_idx  # è¿”å›ç›®æ ‡æ ‡ç­¾ã€æ¡†ã€åˆ†æ•°ã€å‰æ™¯æ©ç å’Œç›®æ ‡ç´¢å¼•
```

### ä¸»è¦åŠŸèƒ½
1. **ç”Ÿæˆé”šæ¡†**ï¼š`generate_anchors`å‡½æ•°æ ¹æ®è¾“å…¥ç‰¹å¾ç”Ÿæˆé”šæ¡†ï¼Œæ”¯æŒanchor-freeå’Œanchor-basedä¸¤ç§æ¨¡å¼ã€‚
2. **è‡ªé€‚åº”è®­ç»ƒæ ·æœ¬é€‰æ‹©**ï¼š`ATSSAssigner`ç±»å®ç°äº†è‡ªé€‚åº”è®­ç»ƒæ ·æœ¬é€‰æ‹©ï¼Œèƒ½å¤Ÿæ ¹æ®IoUå’Œè·ç¦»ç­‰ä¿¡æ¯é€‰æ‹©æœ€ä¼˜çš„é”šæ¡†ä¸çœŸå®æ¡†çš„åŒ¹é…ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ä¸»è¦å®ç°äº†YOLOv8ç®—æ³•ä¸­çš„ä¸€äº›å·¥å…·å‡½æ•°å’Œç±»ï¼Œä¸»è¦ç”¨äºç›®æ ‡æ£€æµ‹ä¸­çš„é”šæ¡†ç”Ÿæˆã€é‡å è®¡ç®—ã€è·ç¦»è®¡ç®—ä»¥åŠè‡ªé€‚åº”è®­ç»ƒæ ·æœ¬é€‰æ‹©ç­‰åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†å¿…è¦çš„PyTorchåº“ï¼Œå¹¶å®šä¹‰äº†ä¸€äº›å‡½æ•°ã€‚`generate_anchors`å‡½æ•°ç”¨äºæ ¹æ®ç‰¹å¾å›¾ç”Ÿæˆé”šæ¡†ã€‚å®ƒæ”¯æŒä¸¤ç§æ¨¡å¼ï¼šanchor-freeï¼ˆæ— é”šæ¡†ï¼‰å’Œanchor-basedï¼ˆåŸºäºé”šæ¡†ï¼‰ã€‚åœ¨è¯„ä¼°æ¨¡å¼ä¸‹ï¼Œå®ƒç”Ÿæˆé”šç‚¹å¹¶è¿”å›é”šç‚¹å’Œæ­¥å¹…å¼ é‡ï¼›åœ¨è®­ç»ƒæ¨¡å¼ä¸‹ï¼Œå®ƒç”Ÿæˆå…·ä½“çš„é”šæ¡†åæ ‡ã€‚

æ¥ä¸‹æ¥ï¼Œ`fp16_clamp`å‡½æ•°ç”¨äºå¯¹å¼ é‡è¿›è¡Œæ•°å€¼é™åˆ¶ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹åŠç²¾åº¦æµ®ç‚¹æ•°ï¼ˆFP16ï¼‰ï¼Œä»¥é¿å…æ•°å€¼æº¢å‡ºã€‚`bbox_overlaps`å‡½æ•°è®¡ç®—ä¸¤ä¸ªè¾¹ç•Œæ¡†é›†åˆä¹‹é—´çš„é‡å ç¨‹åº¦ï¼Œæ”¯æŒå¤šç§é‡å è®¡ç®—æ¨¡å¼ï¼ˆå¦‚IoUã€IoFå’ŒGIoUï¼‰ï¼Œå¹¶è€ƒè™‘äº†å¯¹é½çš„æƒ…å†µã€‚

`cast_tensor_type`å’Œ`iou2d_calculator`å‡½æ•°åˆ™ç”¨äºå¤„ç†å¼ é‡ç±»å‹è½¬æ¢å’Œè®¡ç®—2Dè¾¹ç•Œæ¡†çš„é‡å ã€‚`dist_calculator`å‡½æ•°è®¡ç®—æ‰€æœ‰è¾¹ç•Œæ¡†ä¸çœŸå®æ¡†ä¹‹é—´çš„ä¸­å¿ƒè·ç¦»ï¼Œè€Œ`iou_calculator`å‡½æ•°åˆ™è®¡ç®—æ‰¹é‡çš„IoUå€¼ã€‚

åœ¨ç±»`ATSSAssigner`ä¸­ï¼Œå®ç°äº†è‡ªé€‚åº”è®­ç»ƒæ ·æœ¬é€‰æ‹©çš„é€»è¾‘ã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°æ¥å—å‚æ•°å¦‚`topk`å’Œ`num_classes`ï¼Œå¹¶å®šä¹‰äº†å‰å‘ä¼ æ’­æ–¹æ³•ã€‚`forward`æ–¹æ³•ä¸­ï¼Œé¦–å…ˆè®¡ç®—é”šæ¡†ä¸çœŸå®æ¡†ä¹‹é—´çš„IoUï¼Œç„¶åæ ¹æ®è·ç¦»é€‰æ‹©å€™é€‰æ¡†ï¼Œå¹¶è®¡ç®—é‡å é˜ˆå€¼ï¼Œæœ€ç»ˆç¡®å®šæ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬çš„æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œå¾—åˆ†ã€‚

è¯¥ç±»è¿˜åŒ…å«ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼Œå¦‚`select_topk_candidates`ç”¨äºé€‰æ‹©è·ç¦»æœ€å°çš„å‰kä¸ªå€™é€‰æ¡†ï¼Œ`thres_calculator`ç”¨äºè®¡ç®—æ¯ä¸ªçœŸå®æ¡†çš„é‡å é˜ˆå€¼ï¼Œä»¥åŠ`get_targets`ç”¨äºè·å–æœ€ç»ˆçš„ç›®æ ‡æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œå¾—åˆ†ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºYOLOv8ç›®æ ‡æ£€æµ‹æ¨¡å‹æä¾›äº†é‡è¦çš„åŸºç¡€åŠŸèƒ½ï¼Œå¸®åŠ©æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ›´æœ‰æ•ˆåœ°é€‰æ‹©å’Œå¤„ç†æ ·æœ¬ï¼Œæé«˜æ£€æµ‹ç²¾åº¦ã€‚

#### 11.4 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    DetectionTrainerç±»æ‰©å±•äº†BaseTrainerç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯'train'æˆ–'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº'rect'æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­ï¼Œç¡®ä¿æ•°æ®é›†åªåˆå§‹åŒ–ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True'ä¸DataLoaderçš„shuffleä¸å…¼å®¹ï¼Œè®¾ç½®shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # æ ¹æ®æ¨¡å¼è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©æ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼ç¼©æ”¾
            batch["img"] = imgs
        return batch

    def set_model_attributes(self):
        """è®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œåç§°ã€‚"""
        self.model.nc = self.data["nc"]  # å°†ç±»åˆ«æ•°é‡é™„åŠ åˆ°æ¨¡å‹
        self.model.names = self.data["names"]  # å°†ç±»åˆ«åç§°é™„åŠ åˆ°æ¨¡å‹
        self.model.args = self.args  # å°†è¶…å‚æ•°é™„åŠ åˆ°æ¨¡å‹

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›YOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›YOLOæ¨¡å‹éªŒè¯å™¨ã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )

    def label_loss_items(self, loss_items=None, prefix="train"):
        """
        è¿”å›å¸¦æ ‡ç­¾çš„è®­ç»ƒæŸå¤±é¡¹å­—å…¸ã€‚

        å¯¹äºåˆ†ç±»ä¸éœ€è¦ï¼Œä½†å¯¹äºåˆ†å‰²å’Œæ£€æµ‹æ˜¯å¿…è¦çš„ã€‚
        """
        keys = [f"{prefix}/{x}" for x in self.loss_names]  # åˆ›å»ºæŸå¤±é¡¹çš„é”®
        if loss_items is not None:
            loss_items = [round(float(x), 5) for x in loss_items]  # å°†å¼ é‡è½¬æ¢ä¸ºä¿ç•™5ä½å°æ•°çš„æµ®ç‚¹æ•°
            return dict(zip(keys, loss_items))  # è¿”å›é”®å€¼å¯¹å­—å…¸
        else:
            return keys

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ

    def plot_training_labels(self):
        """åˆ›å»ºYOLOæ¨¡å‹çš„æ ‡è®°è®­ç»ƒå›¾ã€‚"""
        boxes = np.concatenate([lb["bboxes"] for lb in self.train_loader.dataset.labels], 0)  # åˆå¹¶æ‰€æœ‰è¾¹ç•Œæ¡†
        cls = np.concatenate([lb["cls"] for lb in self.train_loader.dataset.labels], 0)  # åˆå¹¶æ‰€æœ‰ç±»åˆ«
        plot_labels(boxes, cls.squeeze(), names=self.data["names"], save_dir=self.save_dir, on_plot=self.on_plot)  # ç»˜åˆ¶æ ‡ç­¾
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è§£é‡Š
1. **DetectionTrainerç±»**ï¼šè¯¥ç±»è´Ÿè´£è®­ç»ƒYOLOæ£€æµ‹æ¨¡å‹ï¼Œç»§æ‰¿è‡ªBaseTrainerã€‚
2. **build_datasetæ–¹æ³•**ï¼šæ„å»ºYOLOæ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ã€‚
3. **get_dataloaderæ–¹æ³•**ï¼šåˆ›å»ºæ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹å’Œæ•°æ®æ‰“ä¹±ã€‚
4. **preprocess_batchæ–¹æ³•**ï¼šå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œç¼©æ”¾ã€‚
5. **set_model_attributesæ–¹æ³•**ï¼šè®¾ç½®æ¨¡å‹çš„ç±»åˆ«æ•°é‡å’Œåç§°ã€‚
6. **get_modelæ–¹æ³•**ï¼šè¿”å›YOLOæ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
7. **get_validatoræ–¹æ³•**ï¼šè¿”å›ç”¨äºéªŒè¯æ¨¡å‹çš„éªŒè¯å™¨ã€‚
8. **label_loss_itemsæ–¹æ³•**ï¼šè¿”å›è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ã€‚
9. **plot_training_samplesæ–¹æ³•**ï¼šç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ³¨é‡Šã€‚
10. **plot_metricsæ–¹æ³•**ï¼šç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ã€‚
11. **plot_training_labelsæ–¹æ³•**ï¼šç»˜åˆ¶è®­ç»ƒæ•°æ®çš„æ ‡ç­¾ä¿¡æ¯ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚ç¨‹åºä¸­åŒ…å«å¤šä¸ªæ–¹æ³•ï¼Œè´Ÿè´£æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€æ¨¡å‹è®¾ç½®ã€è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±è®¡ç®—å’Œå¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ·±åº¦å­¦ä¹ ç›¸å…³çš„ PyTorch åº“ä»¥åŠ Ultralytics æä¾›çš„ YOLO ç›¸å…³æ¨¡å—ã€‚æ¥ç€å®šä¹‰äº† `DetectionTrainer` ç±»ï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨äºè®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚

åœ¨ `build_dataset` æ–¹æ³•ä¸­ï¼Œç¨‹åºæ ¹æ®ä¼ å…¥çš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ„å»º YOLO æ•°æ®é›†ã€‚è¿™ä¸ªæ–¹æ³•è¿˜æ”¯æŒä¸åŒæ¨¡å¼ä¸‹çš„å›¾åƒå¢å¼ºï¼Œç¡®ä¿è®­ç»ƒå’ŒéªŒè¯è¿‡ç¨‹ä¸­çš„æ•°æ®å¤„ç†èƒ½å¤Ÿé€‚åº”ä¸åŒçš„éœ€æ±‚ã€‚

`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ã€‚å®ƒä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°åˆå§‹åŒ–æ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å¼å†³å®šæ˜¯å¦æ‰“ä¹±æ•°æ®é¡ºåºã€‚å¯¹äºè®­ç»ƒæ¨¡å¼ï¼Œæ•°æ®ä¼šè¢«æ‰“ä¹±ï¼Œè€Œåœ¨éªŒè¯æ¨¡å¼ä¸‹åˆ™ä¸ä¼šã€‚

`preprocess_batch` æ–¹æ³•è´Ÿè´£å¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°é€‚å½“çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚è¯¥æ–¹æ³•è¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒçš„å°ºå¯¸æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ç­‰ã€‚è¿™äº›ä¿¡æ¯ä¼šè¢«é™„åŠ åˆ°æ¨¡å‹ä¸­ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹å®ä¾‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚`get_validator` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„ `DetectionValidator` å®ä¾‹ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒåè¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚

`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›å¸¦æœ‰æ ‡ç­¾çš„è®­ç»ƒæŸå¤±é¡¹å­—å…¸ï¼Œä¾¿äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç›‘æ§æ¨¡å‹çš„å­¦ä¹ æƒ…å†µã€‚`progress_string` æ–¹æ³•åˆ™æ ¼å¼åŒ–è¾“å‡ºè®­ç»ƒè¿›åº¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬å½“å‰çš„ epochã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ã€‚

åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œ`plot_training_samples` æ–¹æ³•ä¼šç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä»¥ä¾¿å¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•ç”¨äºä» CSV æ–‡ä»¶ä¸­ç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œç”Ÿæˆå¸¦æ ‡ç­¾çš„è®­ç»ƒå›¾ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªç¨‹åºæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒå’Œè¯„ä¼° YOLO ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹æ„å»ºã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\trackers\basetrack.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license

from collections import OrderedDict
import numpy as np

class TrackState:
    """å¯¹è±¡è·Ÿè¸ªçŠ¶æ€çš„æšä¸¾ç±»ã€‚"""
    New = 0      # æ–°è·Ÿè¸ª
    Tracked = 1  # æ­£åœ¨è·Ÿè¸ª
    Lost = 2     # è·Ÿè¸ªä¸¢å¤±
    Removed = 3  # è·Ÿè¸ªå·²ç§»é™¤

class BaseTrack:
    """å¯¹è±¡è·Ÿè¸ªçš„åŸºç±»ï¼Œå¤„ç†åŸºæœ¬çš„è·Ÿè¸ªå±æ€§å’Œæ“ä½œã€‚"""

    _count = 0  # å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨

    def __init__(self):
        self.track_id = BaseTrack.next_id()  # ä¸ºæ¯ä¸ªè·Ÿè¸ªåˆ†é…å”¯ä¸€ID
        self.is_activated = False  # è·Ÿè¸ªæ˜¯å¦è¢«æ¿€æ´»
        self.state = TrackState.New  # åˆå§‹çŠ¶æ€ä¸ºæ–°è·Ÿè¸ª
        self.history = OrderedDict()  # å­˜å‚¨è·Ÿè¸ªå†å²
        self.features = []  # ç‰¹å¾åˆ—è¡¨
        self.curr_feature = None  # å½“å‰ç‰¹å¾
        self.score = 0  # è·Ÿè¸ªå¾—åˆ†
        self.start_frame = 0  # å¼€å§‹å¸§
        self.frame_id = 0  # å½“å‰å¸§ID
        self.time_since_update = 0  # è‡ªä¸Šæ¬¡æ›´æ–°ä»¥æ¥çš„æ—¶é—´

        # å¤šæ‘„åƒå¤´æ”¯æŒ
        self.location = (np.inf, np.inf)  # åˆå§‹ä½ç½®ä¸ºæ— ç©·å¤§

    @property
    def end_frame(self):
        """è¿”å›è·Ÿè¸ªçš„æœ€åå¸§IDã€‚"""
        return self.frame_id

    @staticmethod
    def next_id():
        """é€’å¢å¹¶è¿”å›å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚"""
        BaseTrack._count += 1
        return BaseTrack._count

    def mark_lost(self):
        """å°†è·Ÿè¸ªæ ‡è®°ä¸ºä¸¢å¤±ã€‚"""
        self.state = TrackState.Lost

    def mark_removed(self):
        """å°†è·Ÿè¸ªæ ‡è®°ä¸ºå·²ç§»é™¤ã€‚"""
        self.state = TrackState.Removed

    @staticmethod
    def reset_id():
        """é‡ç½®å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚"""
        BaseTrack._count = 0
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **TrackState ç±»**ï¼šå®šä¹‰äº†è·Ÿè¸ªçŠ¶æ€çš„æšä¸¾ï¼ŒåŒ…æ‹¬æ–°è·Ÿè¸ªã€æ­£åœ¨è·Ÿè¸ªã€ä¸¢å¤±å’Œå·²ç§»é™¤çŠ¶æ€ã€‚
2. **BaseTrack ç±»**ï¼šæ˜¯å¯¹è±¡è·Ÿè¸ªçš„åŸºç±»ï¼ŒåŒ…å«è·Ÿè¸ªçš„åŸºæœ¬å±æ€§å’Œæ–¹æ³•ã€‚
   - `__init__` æ–¹æ³•ï¼šåˆå§‹åŒ–è·Ÿè¸ªå¯¹è±¡çš„å±æ€§ï¼ŒåŒ…æ‹¬å”¯ä¸€IDã€çŠ¶æ€ã€å†å²è®°å½•ã€ç‰¹å¾ç­‰ã€‚
   - `end_frame` å±æ€§ï¼šè¿”å›è·Ÿè¸ªçš„æœ€åå¸§IDã€‚
   - `next_id` é™æ€æ–¹æ³•ï¼šç”¨äºç”Ÿæˆå”¯ä¸€çš„è·Ÿè¸ªIDã€‚
   - `mark_lost` å’Œ `mark_removed` æ–¹æ³•ï¼šç”¨äºæ›´æ–°è·Ÿè¸ªçŠ¶æ€ã€‚
   - `reset_id` é™æ€æ–¹æ³•ï¼šç”¨äºé‡ç½®å…¨å±€è·Ÿè¸ªIDè®¡æ•°å™¨ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç®—æ³•ä¸­çš„ä¸€ä¸ªåŸºç¡€è¿½è¸ªç±»çš„å®ç°ï¼Œä¸»è¦ç”¨äºå¤„ç†å¯¹è±¡è¿½è¸ªçš„åŸºæœ¬å±æ€§å’Œæ“ä½œã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ª`TrackState`ç±»ï¼Œç”¨äºæšä¸¾å¯èƒ½çš„å¯¹è±¡è¿½è¸ªçŠ¶æ€ï¼ŒåŒ…æ‹¬æ–°å»ºã€è¢«è¿½è¸ªã€ä¸¢å¤±å’Œå·²ç§»é™¤ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€ä¸ª`BaseTrack`ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹è±¡è¿½è¸ªçš„åŸºç±»ï¼ŒåŒ…å«äº†ä¸€äº›åŸºæœ¬çš„å±æ€§å’Œæ–¹æ³•ã€‚

åœ¨`BaseTrack`ç±»ä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€äº›ç±»å±æ€§ï¼Œä¾‹å¦‚`_count`ç”¨äºè·Ÿè¸ªå…¨å±€çš„è¿½è¸ªIDè®¡æ•°ï¼Œ`track_id`è¡¨ç¤ºå½“å‰è¿½è¸ªçš„IDï¼Œ`is_activated`è¡¨ç¤ºè¿½è¸ªæ˜¯å¦è¢«æ¿€æ´»ï¼Œ`state`è¡¨ç¤ºå½“å‰è¿½è¸ªçš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºæ–°å»ºçŠ¶æ€ã€‚`history`æ˜¯ä¸€ä¸ªæœ‰åºå­—å…¸ï¼Œç”¨äºå­˜å‚¨è¿½è¸ªå†å²ï¼Œ`features`å’Œ`curr_feature`ç”¨äºå­˜å‚¨ç‰¹å¾ä¿¡æ¯ï¼Œ`score`è¡¨ç¤ºè¿½è¸ªçš„åˆ†æ•°ï¼Œ`start_frame`å’Œ`frame_id`ç”¨äºè®°å½•è¿½è¸ªçš„èµ·å§‹å¸§å’Œå½“å‰å¸§ï¼Œ`time_since_update`è¡¨ç¤ºè‡ªä¸Šæ¬¡æ›´æ–°ä»¥æ¥çš„æ—¶é—´ã€‚`location`ç”¨äºå­˜å‚¨å¤šæ‘„åƒå¤´æƒ…å†µä¸‹çš„ä½ç½®ä¿¡æ¯ã€‚

`BaseTrack`ç±»ä¸­è¿˜å®šä¹‰äº†ä¸€äº›æ–¹æ³•ã€‚`end_frame`æ˜¯ä¸€ä¸ªå±æ€§æ–¹æ³•ï¼Œç”¨äºè¿”å›è¿½è¸ªçš„æœ€åä¸€å¸§IDã€‚`next_id`æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºé€’å¢å¹¶è¿”å›å…¨å±€è¿½è¸ªIDè®¡æ•°ã€‚`activate`ã€`predict`å’Œ`update`æ–¹æ³•æ˜¯éœ€è¦å­ç±»å®ç°çš„æŠ½è±¡æ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºæ¿€æ´»è¿½è¸ªã€é¢„æµ‹ä¸‹ä¸€ä¸ªçŠ¶æ€å’Œæ›´æ–°è¿½è¸ªä¿¡æ¯ã€‚`mark_lost`å’Œ`mark_removed`æ–¹æ³•ç”¨äºå°†è¿½è¸ªçŠ¶æ€æ ‡è®°ä¸ºä¸¢å¤±æˆ–å·²ç§»é™¤ã€‚æœ€åï¼Œ`reset_id`æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºé‡ç½®å…¨å±€è¿½è¸ªIDè®¡æ•°ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªåŸºç¡€çš„è¿½è¸ªæ¡†æ¶ï¼Œåç»­å¯ä»¥é€šè¿‡ç»§æ‰¿`BaseTrack`ç±»æ¥å®ç°å…·ä½“çš„è¿½è¸ªç®—æ³•å’Œé€»è¾‘ã€‚

#### 11.6 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\extra_modules\ops_dcnv3\modules\dcnv3.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import torch
from torch import nn
import torch.nn.functional as F

class DCNv3(nn.Module):
    def __init__(self,
                 channels=64,
                 kernel_size=3,
                 stride=1,
                 pad=1,
                 dilation=1,
                 group=4,
                 offset_scale=1.0,
                 center_feature_scale=False,
                 remove_center=False):
        """
        DCNv3æ¨¡å—çš„åˆå§‹åŒ–å‡½æ•°
        :param channels: è¾“å…¥é€šé“æ•°
        :param kernel_size: å·ç§¯æ ¸å¤§å°
        :param stride: æ­¥å¹…
        :param pad: å¡«å……
        :param dilation: è†¨èƒ€
        :param group: åˆ†ç»„æ•°
        :param offset_scale: åç§»ç¼©æ”¾å› å­
        :param center_feature_scale: æ˜¯å¦ä½¿ç”¨ä¸­å¿ƒç‰¹å¾ç¼©æ”¾
        :param remove_center: æ˜¯å¦ç§»é™¤ä¸­å¿ƒç‚¹
        """
        super().__init__()
        # ç¡®ä¿é€šé“æ•°å¯ä»¥è¢«åˆ†ç»„æ•°æ•´é™¤
        if channels % group != 0:
            raise ValueError(f'channels must be divisible by group, but got {channels} and {group}')
        
        self.channels = channels
        self.kernel_size = kernel_size
        self.stride = stride
        self.dilation = dilation
        self.pad = pad
        self.group = group
        self.group_channels = channels // group
        self.offset_scale = offset_scale
        self.center_feature_scale = center_feature_scale
        self.remove_center = int(remove_center)

        # å®šä¹‰å·ç§¯å±‚ã€åç§»é‡å’Œæ©ç çš„çº¿æ€§å±‚
        self.dw_conv = nn.Conv2d(channels, channels, kernel_size, stride=1, padding=pad, groups=channels)
        self.offset = nn.Linear(channels, group * (kernel_size * kernel_size - remove_center) * 2)
        self.mask = nn.Linear(channels, group * (kernel_size * kernel_size - remove_center))
        self.input_proj = nn.Linear(channels, channels)
        self.output_proj = nn.Linear(channels, channels)

        # åˆå§‹åŒ–å‚æ•°
        self._reset_parameters()

        # å¦‚æœä½¿ç”¨ä¸­å¿ƒç‰¹å¾ç¼©æ”¾ï¼Œåˆå§‹åŒ–ç›¸å…³å‚æ•°
        if center_feature_scale:
            self.center_feature_scale_proj_weight = nn.Parameter(torch.zeros((group, channels), dtype=torch.float))
            self.center_feature_scale_proj_bias = nn.Parameter(torch.tensor(0.0, dtype=torch.float).repeat(group))

    def _reset_parameters(self):
        """é‡ç½®ç½‘ç»œå‚æ•°"""
        nn.init.constant_(self.offset.weight.data, 0.)
        nn.init.constant_(self.offset.bias.data, 0.)
        nn.init.constant_(self.mask.weight.data, 0.)
        nn.init.constant_(self.mask.bias.data, 0.)
        nn.init.xavier_uniform_(self.input_proj.weight.data)
        nn.init.constant_(self.input_proj.bias.data, 0.)
        nn.init.xavier_uniform_(self.output_proj.weight.data)
        nn.init.constant_(self.output_proj.bias.data, 0.)

    def forward(self, input):
        """
        å‰å‘ä¼ æ’­å‡½æ•°
        :param input: è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º (N, H, W, C)
        :return: è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º (N, H, W, C)
        """
        N, H, W, _ = input.shape  # è·å–è¾“å…¥çš„å½¢çŠ¶

        # è¾“å…¥æŠ•å½±
        x = self.input_proj(input)
        x_proj = x  # ä¿å­˜è¾“å…¥æŠ•å½±çš„ç»“æœ

        # è¿›è¡Œæ·±åº¦å·ç§¯
        x1 = input.permute(0, 3, 1, 2)  # å°†è¾“å…¥å¼ é‡ä» (N, H, W, C) è½¬æ¢ä¸º (N, C, H, W)
        x1 = self.dw_conv(x1).permute(0, 2, 3, 1)  # æ·±åº¦å·ç§¯åå†è½¬æ¢å› (N, H, W, C)

        # è®¡ç®—åç§»é‡å’Œæ©ç 
        offset = self.offset(x1)
        mask = self.mask(x1).reshape(N, H, W, self.group, -1)
        mask = F.softmax(mask, -1).reshape(N, H, W, -1)  # å¯¹æ©ç è¿›è¡Œsoftmaxå¤„ç†

        # ä½¿ç”¨DCNv3çš„æ ¸å¿ƒå‡½æ•°è¿›è¡Œå·ç§¯æ“ä½œ
        x = DCNv3Function.apply(
            x, offset, mask,
            self.kernel_size, self.kernel_size,
            self.stride, self.stride,
            self.pad, self.pad,
            self.dilation, self.dilation,
            self.group, self.group_channels,
            self.offset_scale,
            256,
            self.remove_center)

        # å¦‚æœä½¿ç”¨ä¸­å¿ƒç‰¹å¾ç¼©æ”¾ï¼Œè¿›è¡Œç›¸åº”çš„å¤„ç†
        if self.center_feature_scale:
            center_feature_scale = self.center_feature_scale_proj_weight @ x1 + self.center_feature_scale_proj_bias
            center_feature_scale = center_feature_scale[..., None].repeat(1, 1, 1, 1, self.channels // self.group).flatten(-2)
            x = x * (1 - center_feature_scale) + x_proj * center_feature_scale

        # è¾“å‡ºæŠ•å½±
        x = self.output_proj(x)

        return x  # è¿”å›è¾“å‡ºç»“æœ
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **DCNv3ç±»**ï¼šå®ç°äº†æ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…å«åˆå§‹åŒ–ã€å‚æ•°é‡ç½®å’Œå‰å‘ä¼ æ’­æ–¹æ³•ã€‚
2. **_reset_parametersæ–¹æ³•**ï¼šç”¨äºåˆå§‹åŒ–ç½‘ç»œçš„æƒé‡å’Œåç½®ï¼Œç¡®ä¿æ¨¡å‹çš„è®­ç»ƒç¨³å®šæ€§ã€‚
3. **forwardæ–¹æ³•**ï¼šå®ç°äº†å‰å‘ä¼ æ’­çš„é€»è¾‘ï¼ŒåŒ…æ‹¬è¾“å…¥çš„æŠ•å½±ã€æ·±åº¦å·ç§¯ã€åç§»é‡å’Œæ©ç çš„è®¡ç®—ï¼Œä»¥åŠæœ€ç»ˆçš„è¾“å‡ºæŠ•å½±ã€‚

ä»¥ä¸Šä»£ç å±•ç¤ºäº†æ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„å®ç°ï¼Œé€‚ç”¨äºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­çš„ç‰¹å¾æå–å’Œå›¾åƒå¤„ç†ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªå®ç°äº†DCNv3ï¼ˆDeformable Convolutional Networks v3ï¼‰æ¨¡å—çš„PyTorchä»£ç ã€‚DCNv3æ˜¯ä¸€ç§æ”¹è¿›çš„å·ç§¯ç½‘ç»œï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å½¢å˜å’Œå¤æ‚çš„å›¾åƒç‰¹å¾ã€‚æ–‡ä»¶ä¸­åŒ…å«äº†å¤šä¸ªç±»å’Œå‡½æ•°ï¼Œç”¨äºæ„å»ºå’Œä½¿ç”¨DCNv3æ¨¡å—ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¼•å…¥äº†ä¸€äº›å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬PyTorchå’Œä¸€äº›å¸¸ç”¨çš„ç¥ç»ç½‘ç»œæ¨¡å—ã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸¤ä¸ªè¾…åŠ©ç±»`to_channels_first`å’Œ`to_channels_last`ï¼Œç”¨äºåœ¨é€šé“ä¼˜å…ˆå’Œé€šé“æœ€åæ ¼å¼ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚è¿™å¯¹äºå¤„ç†ä¸åŒæ ¼å¼çš„è¾“å…¥æ•°æ®éå¸¸é‡è¦ã€‚

æ¥ä¸‹æ¥ï¼Œ`build_norm_layer`å‡½æ•°ç”¨äºæ„å»ºå½’ä¸€åŒ–å±‚ï¼Œå¯ä»¥é€‰æ‹©æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰æˆ–å±‚å½’ä¸€åŒ–ï¼ˆLayer Normalizationï¼‰ï¼Œå¹¶æ ¹æ®è¾“å…¥å’Œè¾“å‡ºæ ¼å¼è¿›è¡Œç›¸åº”çš„è½¬æ¢ã€‚`build_act_layer`å‡½æ•°åˆ™ç”¨äºæ„å»ºæ¿€æ´»å‡½æ•°å±‚ï¼Œæ”¯æŒReLUã€SiLUå’ŒGELUç­‰æ¿€æ´»å‡½æ•°ã€‚

`_is_power_of_2`å‡½æ•°ç”¨äºæ£€æŸ¥ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯2çš„å¹‚ï¼Œè¿™åœ¨ä¼˜åŒ–CUDAå®ç°æ—¶éå¸¸æœ‰ç”¨ã€‚

`CenterFeatureScaleModule`ç±»ç”¨äºè®¡ç®—ä¸­å¿ƒç‰¹å¾ç¼©æ”¾ï¼Œå®ƒé€šè¿‡çº¿æ€§å˜æ¢å°†è¾“å…¥çš„ç‰¹å¾è¿›è¡Œç¼©æ”¾å¤„ç†ã€‚

`DCNv3_pytorch`ç±»æ˜¯DCNv3æ¨¡å—çš„ä¸»è¦å®ç°ã€‚æ„é€ å‡½æ•°ä¸­å®šä¹‰äº†å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬é€šé“æ•°ã€å·ç§¯æ ¸å¤§å°ã€æ­¥å¹…ã€å¡«å……ã€æ‰©å¼ ç‡ã€åˆ†ç»„æ•°ç­‰ã€‚å®ƒè¿˜åˆå§‹åŒ–äº†ä¸€äº›çº¿æ€§å±‚å’Œå·ç§¯å±‚ï¼Œå¹¶æ ¹æ®éœ€è¦è®¾ç½®ä¸­å¿ƒç‰¹å¾ç¼©æ”¾æ¨¡å—ã€‚`_reset_parameters`æ–¹æ³•ç”¨äºåˆå§‹åŒ–æ¨¡å‹å‚æ•°ã€‚

`forward`æ–¹æ³•æ˜¯DCNv3æ¨¡å—çš„å‰å‘ä¼ æ’­é€»è¾‘ã€‚å®ƒæ¥æ”¶è¾“å…¥ç‰¹å¾ï¼Œå¹¶é€šè¿‡ä¸€ç³»åˆ—çº¿æ€§å˜æ¢å’Œå·ç§¯æ“ä½œï¼Œè®¡ç®—å‡ºåç§»é‡å’Œæ©ç ã€‚ç„¶åï¼Œè°ƒç”¨`dcnv3_core_pytorch`å‡½æ•°è¿›è¡Œæ ¸å¿ƒçš„å¯å˜å½¢å·ç§¯æ“ä½œï¼Œæœ€åé€šè¿‡è¾“å‡ºæŠ•å½±å±‚ç”Ÿæˆæœ€ç»ˆè¾“å‡ºã€‚

`DCNv3`ç±»æ˜¯DCNv3æ¨¡å—çš„å¦ä¸€ç§å®ç°ï¼Œä½¿ç”¨äº†è‡ªå®šä¹‰çš„å·ç§¯ç±»`Conv`ï¼Œå…¶ä½™éƒ¨åˆ†ä¸`DCNv3_pytorch`ç±»ä¼¼ã€‚

`DCNv3_DyHead`ç±»æ˜¯DCNv3æ¨¡å—çš„åŠ¨æ€å¤´å®ç°ï¼Œä¸»è¦ç”¨äºå¤„ç†è¾“å…¥çš„åç§»é‡å’Œæ©ç ã€‚å®ƒçš„å‰å‘ä¼ æ’­é€»è¾‘ä¸`DCNv3`ç›¸ä¼¼ï¼Œä½†åœ¨å¤„ç†è¾“å…¥æ—¶æœ‰ä¸€äº›ä¸åŒçš„ç»†èŠ‚ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†DCNv3æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›äº†çµæ´»çš„æ„å»ºå’Œä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥ç”¨äºå„ç§è®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚å½¢å˜çš„å›¾åƒæ—¶è¡¨ç°ä¼˜å¼‚ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®ä¸»è¦æ˜¯ä¸€ä¸ªåŸºäºYOLOv8ç®—æ³•çš„ç›®æ ‡æ£€æµ‹å’Œè¿½è¸ªç³»ç»Ÿï¼ŒåŒ…å«äº†å¤šä¸ªæ¨¡å—å’ŒåŠŸèƒ½ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå…¨é¢çš„è§£å†³æ–¹æ¡ˆæ¥å¤„ç†è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚æ•´ä½“æ¶æ„åˆ†ä¸ºå‡ ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

1. **ç”¨æˆ·ç•Œé¢** (`ui.py`): æä¾›äº†ä¸€ä¸ªç®€å•çš„ç•Œé¢æ¥è¿è¡Œå’Œæµ‹è¯•YOLOv8æ¨¡å‹ã€‚
2. **æ¨¡å‹è®­ç»ƒ** (`train.py`, `pose/train.py`): åŒ…å«è®­ç»ƒYOLOv8æ¨¡å‹çš„é€»è¾‘ï¼Œæ”¯æŒæ•°æ®é›†æ„å»ºã€æ¨¡å‹è®¾ç½®å’Œè®­ç»ƒè¿‡ç¨‹çš„ç›‘æ§ã€‚
3. **å·¥å…·å‡½æ•°** (`atss.py`, `checks.py`): æä¾›äº†è¾…åŠ©åŠŸèƒ½ï¼Œå¦‚é”šæ¡†ç”Ÿæˆã€æŸå¤±è®¡ç®—ã€æ•°æ®éªŒè¯ç­‰ã€‚
4. **è¿½è¸ªæ¨¡å—** (`basetrack.py`, `kalman_filter.py`): å®ç°äº†å¯¹è±¡è¿½è¸ªçš„åŸºæœ¬æ¡†æ¶å’Œç®—æ³•ï¼Œæ”¯æŒå¯¹æ£€æµ‹åˆ°çš„å¯¹è±¡è¿›è¡Œè¿½è¸ªã€‚
5. **ç¥ç»ç½‘ç»œæ¨¡å—** (`dcnv3.py`, `transformer.py`, `EfficientFormerV2.py`): å®ç°äº†å„ç§ç¥ç»ç½‘ç»œç»“æ„å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬å¯å˜å½¢å·ç§¯å’Œå˜æ¢å™¨æ¶æ„ï¼Œä»¥å¢å¼ºæ¨¡å‹çš„è¡¨ç°åŠ›ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                                   | åŠŸèƒ½æè¿°                                                                                       |
|------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| `ui.py`                                                                                                   | æä¾›ç”¨æˆ·ç•Œé¢ä»¥è¿è¡Œå’Œæµ‹è¯•YOLOv8æ¨¡å‹ã€‚                                                          |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\pose\train.py`         | å®ç°å§¿æ€ä¼°è®¡æ¨¡å‹çš„è®­ç»ƒé€»è¾‘ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ¨¡å‹è®¾ç½®å’Œè®­ç»ƒè¿‡ç¨‹ç›‘æ§ã€‚                       |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\atss.py`                     | æä¾›ç›®æ ‡æ£€æµ‹ä¸­çš„é”šæ¡†ç”Ÿæˆã€é‡å è®¡ç®—å’Œè‡ªé€‚åº”è®­ç»ƒæ ·æœ¬é€‰æ‹©ç­‰åŠŸèƒ½ã€‚                             |
| `train.py`                                                                                               | è®­ç»ƒYOLOç›®æ ‡æ£€æµ‹æ¨¡å‹çš„ä¸»é€»è¾‘ï¼Œå¤„ç†æ•°æ®é›†ã€æ¨¡å‹æ„å»ºå’Œè®­ç»ƒè¿‡ç¨‹ç›‘æ§ã€‚                        |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\trackers\basetrack.py`            | å®šä¹‰åŸºç¡€è¿½è¸ªç±»å’ŒçŠ¶æ€ç®¡ç†ï¼Œç”¨äºå®ç°å¯¹è±¡è¿½è¸ªçš„åŸºæœ¬æ¡†æ¶ã€‚                                     |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\extra_modules\ops_dcnv3\modules\dcnv3.py` | å®ç°DCNv3æ¨¡å—ï¼Œå¢å¼ºå·ç§¯æ“ä½œä»¥å¤„ç†å¤æ‚çš„å›¾åƒç‰¹å¾ã€‚                                          |
| `code\ultralytics\utils\checks.py`                                                                       | æä¾›æ¨¡å‹éªŒè¯å’Œæ£€æŸ¥åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®å’Œæ¨¡å‹çš„æ­£ç¡®æ€§ã€‚                                            |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\modules\transformer.py`         | å®ç°å˜æ¢å™¨æ¨¡å—ï¼Œç”¨äºå¢å¼ºæ¨¡å‹çš„ç‰¹å¾æå–èƒ½åŠ›ã€‚                                                |
| `code\ultralytics\trackers\__init__.py`                                                                  | åˆå§‹åŒ–è¿½è¸ªæ¨¡å—ï¼Œå¯èƒ½åŒ…å«è¿½è¸ªç›¸å…³çš„ç±»å’Œå‡½æ•°çš„å¯¼å…¥ã€‚                                          |
| `code\ultralytics\trackers\utils\kalman_filter.py`                                                      | å®ç°å¡å°”æ›¼æ»¤æ³¢å™¨ï¼Œç”¨äºè¿½è¸ªç®—æ³•ä¸­çš„çŠ¶æ€ä¼°è®¡å’Œæ›´æ–°ã€‚                                          |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\backbone\EfficientFormerV2.py` | å®ç°EfficientFormerV2éª¨å¹²ç½‘ç»œï¼Œç”¨äºç‰¹å¾æå–ã€‚                                              |
| `code\ultralytics\solutions\object_counter.py`                                                           | å®ç°å¯¹è±¡è®¡æ•°åŠŸèƒ½ï¼ŒåŸºäºæ£€æµ‹ç»“æœè¿›è¡Œå¯¹è±¡æ•°é‡ç»Ÿè®¡ã€‚                                            |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªé¡¹ç›®çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuZk5xw](https://mbd.pub/o/bread/ZpuZk5xw)